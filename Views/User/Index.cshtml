@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
    ViewData["Title"] = "کاربر";
}
<link rel="stylesheet" type="text/css" href="~/css/User/userStyle.css" asp-append-version="true" />





<div id="main-page" class="d-flex flex-column px-2 py-5 p-sm-5">
    <div id="header" class="d-flex flex-row justify-content-between p-2">

        <input id="search-input" placeholder="جستجو" type="search"></input>

        <div id="add-delete-buttons" class="slm  d-flex flex-row gap-1">
            <button id="Groups-page-button" onclick="location.href='@Url.Action("Index", "Group")'" class="btn btn-secondary">گروه‌ها 
                </button>
            <button id="add-button" onclick="addUser()" class="btn btn-success">افزودن </button>
            <i id="delete-button" onclick="DeleteSelectedUsers()" class="btn btn-danger bi bi-trash3"></i>
        </div>

    </div>
    <!-- Add Modal -->
    <div id="modal" class="">
        <div id="modal-content" class=" align-content-center">
            <i id="close-modal-button" class="bi bi-x"></i>
            <h3 class="font-IYbold mx-auto text-center">افزودن</h3>
            <form id="add-form" class="d-flex flex-column gap-2  font-IYnum  ">
                <div class="position-relative ">
                    <label for="firstName-input" class="form-label">نام</label>
                    <input id="firstName-input" class="modal-input " type="text" value="" />
                </div>
                <p class="modal-error text-danger  text-center">error</p>
                <div class="position-relative">
                    <label for="lastName-input" class="form-label">نام خانوادگی</label>
                    <input id="lastName-input" class="modal-input " type="text" value="" />
                </div>
                <p class="modal-error text-danger  text-center">error</p>
                <div class="position-relative">
                    <label for="phone-input" class="form-label">تلفن</label>
                    <input id="phone-input" class="modal-input font-IYbold " type="text" value="" />
                </div>
                <p class="modal-error text-danger  text-center">error</p>
                <div class="position-relative">
                    <label for="state-input" class="form-label">استان</label>
                    <input id="state-input" class="modal-input " type="text" value="" />
                </div>
                <p class="modal-error text-danger  text-center">error</p>
                <div class="position-relative">
                    <label for="city-input" class="form-label">شهر</label>
                    <input id="city-input" class="modal-input " type="text" value="" />
                </div>
                <p class="modal-error text-danger  text-center">error</p>
                <div class="position-relative">
                    <label for="id-input" class="form-label">کد پرسنلی</label>
                    <input id="id-input" class="modal-input " type="text" value="" />
                </div>
                <p class="modal-error text-danger  text-center">error</p>
                <div class="position-relative">
                    <label for="user-birth-input" class="form-label ">تاریخ تولد</label>
                    <input id="user-birth-input" readonly class="modal-input " type="text" value="" />
                </div>
                <p class="modal-error text-danger  text-center">error</p>
                <div class="d-flex flex-row justify-content-between px-4">
                    <span>
                        گروه:
                    </span>
                    <select id="group-select" class="font-IYlight">
                        <option value="">انتخاب کنید</option>
                    </select>
                </div>
                

                <div id="modal-buttons" class="d-flex flex-row gap-1 modal-input">
                    <button id="add-submit-button" type="button" class="btn btn-success w-100">ثبت</button>
                    <button id="edit-submit-button" data-bs-target="#edit-submit-modal" type="button" class="btn btn-success w-100">ثبت</button>
                    <button onclick="closeModal()" type="button" class="btn btn-danger">لغو</button>
                </div>

            </form>
        </div>
    </div>


    <!-- Edit Submit Modal -->
    <div class="modal fade" id="edit-submit-modal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel"><i class="bi bi-exclamation-triangle text-danger fs-1"></i></h5>
                </div>
                <div class="modal-body">
                    آیا از ویرایش مطمئن هستید؟
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">خیر</button>
                    <button id="edit-submit-modal-button" type="button" class="btn btn-outline-danger" data-bs-dismiss="modal">بله</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Delete Modal -->
    <div class="modal fade" id="delete-modal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel"><i class="bi bi-exclamation-triangle text-danger fs-1"></i></h5>
                </div>
                <div class="modal-body">
                    آیا از حذف کاربر با کد پرسنلی <strong id="delete-modal-id"></strong> مطمعن هستید؟؟
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">خیر</button>
                    <button id="delete-modal-submit" type="button" class="btn btn-outline-danger" data-bs-dismiss="modal">بله</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Group Delete Modal -->
    <div class="modal fade" id="group-delete-modal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel"><i class="bi bi-exclamation-triangle text-danger fs-1"></i></h5>
                </div>
                <div class="modal-body">
                    آیا از حذف کاربران با کد پرسنلی <strong id="group-delete-modal-id"></strong> مطمعن هستید؟؟
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">خیر</button>
                    <button id="group-delete-modal-submit" type="button" class="btn btn-outline-danger" data-bs-dismiss="modal">بله</button>
                </div>
            </div>
        </div>
    </div>



    <!-- Info Modal -->
    <div class="modal fade" id="show-info-modal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel"><i class="bi bi-card-text"></i> اطلاعات</h5>
                </div>
                <div class="modal-body">
                    <div class="d-flex flex-row gap-2 font-IYnum" id="info-form">
                        <div class="">
                            
                        </div>
                        <div>
                          
                        </div>


                    </div>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">بستن</button>
                </div>
            </div>
        </div>
    </div>


    <img id="spinner" src="~/spinner.svg" alt="spinner" />
    <div id="alert" class="alert alert-success  position-absolute " style="display:none;">
        <button href="#" class=" btn btn-close" data-dismiss="alert" aria-label="close"></button>
        جدول با موفقیت ذخیره شد !
    </div>
    <div id="data-table" class="table-container font-IYregular " style="visibility:hidden;">
        <table>
            <thead class="font-IYbold">
                <tr>
                    <th data-dt-order="disable"></th>
                    <th>نام</th>
                    <th>نام خانوادگی</th>
                    <th>شماره تلفن</th>
                    <th>شهر</th>
                    <th>استان</th>
                    <th>تولد</th>
                    <th>گروه</th>
                    <th id="last-col" data-dt-order="disable"></th>
                </tr>
            </thead>
            <tbody class="font-IYnum">
            </tbody>
        </table>
        <div id="page-buttons" class="pt-2 pt-sm-4 d-flex flex-row gap-2">
            <i id="prev" class="bi bi-chevron-right "></i>
            <div id="pages" class="d-flex flex-row gap-1"></div>
            <i id="next" class="bi bi-chevron-left  "></i>

        </div>


    </div>

    <div id="download-submit-buttons" class=" text-sm-start  text-center mt-4 ">
        <button class="btn btn-outline-success " onclick="downloadCSVfile()"> دانلود  <i class="bi bi-download"></i></button>
    </div>

    <select id="chart-select" class="col-2 mx-auto" onchange="handleChartSelectChange(this)" >
        <option value="گروه">گروه</option>
        <option value="استان">استان</option>
        <option value="شهر">شهر</option>
    </select>

    <div id="user-chart style="width: 50%; margin: auto;">
        <canvas id="userBarChart"></canvas>
    </div>  

</div>


<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script src="~/js/User/userScript.js" asp-append-version="true"></script>
<script type="text/javascript" src="https://canvasjs.com/assets/script/jquery-1.11.1.min.js"></script>
<script src="~/lib/persianDatepicker.min.js"></script>
<script type="text/javascript" src="https://cdn.canvasjs.com/jquery.canvasjs.min.js"></script>